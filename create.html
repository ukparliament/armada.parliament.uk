<!DOCTYPE html>

<html>
    <head>
        <title>Armada Tapestries</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <!-- Fonts -->
        <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='assets/fonts/novecento.css' rel='stylesheet' type='text/css'>

        <!-- Styles -->
        <link rel="stylesheet" href="assets/css/libraries/slick.css" media="all">
        <link rel="stylesheet" href="assets/css/libraries/lightbox.css" media="all">
        <link rel="stylesheet" href="assets/css/libraries/audioplayer.css" media="all">
        <link rel="stylesheet" href="assets/css/libraries/animate.css" media="all">
        <link rel="stylesheet" href="assets/css/libraries/jquery.fs.ranger.min.css" media="all">
        <link rel="stylesheet" href="assets/css/libraries/magnific.css" media="all">
        <link rel="stylesheet" href="assets/css/libraries/jquery-ui.css" media="all">
        <link rel="stylesheet" href="assets/css/main.css" media="all">
    </head>

    <body>
        <div id="wrapper">
            <div class="overlay">
                <div class="modal" id="zoom-overlay">
                    <a href="javascript:Armada.Overlay.hide();" class="close-btn"><img src="assets/img/icons/close-dark.png" alt="close window"></a>
                    <div id="zoom-overlay-content">

                    </div>
                </div>
            </div>
            <div id="header">
                <div class="container" id="top">
                    <h1 id="logo"><a href="index.html"><img src="assets/img/logo.png" alt="Armada Tapestries" /></a></h1>

                    <ul id="main-navigation">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="timeline.html">Timeline</a></li>
                        <li><a href="history.html">History</a></li>
                        <li><a href="painting-process.html">Painting Process</a></li>
                        <li><a href="explore.html">Explore</a></li>
                    </ul>
                </div>
            </div>


<div id="main-content">
    <div class="game-container">
        <div class="container">
            <div id="canvas-loading">
                <a href="#" id="play-button">Play</a>
                <h3 id="loading-text">Loading...</h3>
            </div>
            <div id="canvas-container">
                <!-- ajax/game/main-game.html will be appended here -->
            </div>
        </div>
    </div>
</div>

            <div class="push"></div>
        </div><!-- /#wrapper -->
        <div id="footer">
            <div class="footer-top">
                <div class="container">
                    <ul class="column">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="timeline.html">Timeline</a></li>
                    </ul>
                    <ul class="column">
                        <li><a href="history.html">History</a></li>
                        <li><a href="painting-process.html">Painting Process</a></li>
                    </ul>
                    <ul class="column">
                        <li><a href="explore.html">Explore</a></li>
                        <li><a href="credits.html">Credits</a></li>
                    </ul>
                    <ul class="column">
                        <li><a href="mailto:curator@parliament.uk">Contact</a></li>
                        <li><a href="http://www.parliament.uk/art">View more House of Lords Artwork</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="container">
                    <span>&copy; 2015 House of Lords</span><img src="assets/img/house-of-lords.jpg">
                    <span style="float: right;">Site by <a href="http://www.studio24.net">Studio24</a></span>
                </div>
            </div>
        </div>

        <!-- Libraries -->
        <script src="assets/js/libraries/jquery.min.js"></script>
        <script src="assets/js/libraries/jquery.nav.js"></script>
        <script src="assets/js/libraries/jquery.slick.min.js"></script>
        <script src="assets/js/libraries/jquery.audioplayer.min.js"></script>
        <script src="assets/js/libraries/jquery.lightbox.min.js"></script>
        <script src="assets/js/libraries/jquery.viewportchecker.js"></script>
        <script src="assets/js/libraries/jquery.panzoom.min.js"></script>
        <script src="assets/js/libraries/magnific.js"></script>
        <script src="assets/js/libraries/jquery-ui.min.js"></script>

        <!-- Our Code -->
        <script src="assets/js/lib.min.js"></script>
        <script src="assets/js/main.min.js"></script>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-51081446-1', 'parliament.uk');
            ga('set', 'anonymizeIp', true);
            ga('send', 'pageview');
        </script>

<script src="assets/js/libraries/jquery.html5Loader.min.js"></script>
<script src="assets/js/game.min.js"></script>

<script>
    // Keep track of our containers
    var $loadingContainer = $('#canvas-loading');
    var $gameContainer = $('#canvas-container');

    $(document).ready(function () {
        /**
         * These are the files which are going to be preloaded
         * by html5Loader, it supports IMAGES, AUDIO and VIDEO
         *
         * @type {{files: *[]}}
         */
        var gameFiles = {
            "files": [
                { "type":"IMAGE", "source":"assets/img/game/spritesheet.png" },
                { "type":"IMAGE", "source":"assets/img/game/painting-canvas.jpg" },
                { "type":"IMAGE", "source":"assets/img/game/overlay-bg.jpg" },
                { "type":"IMAGE", "source":"assets/img/game/select-ribbon.png" },
                { "type":"IMAGE", "source":"assets/img/game/waves.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageA.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageB.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageC.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageD.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageE.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageS.png" },
//                { "type":"IMAGE", "source":"assets/img/game/imageT.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageU.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageV.png" },
                { "type":"IMAGE", "source":"assets/img/game/imageW.png" }
            ]
        };

        // Run the HTML5 loader
        $.html5Loader({
            filesToLoad:        gameFiles, // this could be a JSON or simply a javascript object
            onBeforeLoad:       function () {  },
            onComplete:         function () {
                // Load the game HTML over AJAX so the images will be preloaded before
                // they are added to the DOM
                $.get('ajax/game/main-game.html', function(data) {
                    // Append the HTML
                    $('#canvas-container').html(data);

                    // Load out the loading text and append the play button
                    $('#loading-text').fadeOut(function() {
                        $('#play-button').fadeIn();
                    });
                });
            }
        });

        // When clicking the play button, initialize the game
        $('#play-button').click(function(e) {
            e.preventDefault();
            // Setup game
            var options = {
                "canvasId": "game",
                "errorId": "canvas-alert",
                "errorCloseId": "canvas-alert-close",
                "selectedObjectId": "canvas-selected-object"
//                ,"debug": true
            };

            // Initiate the game
            Armada.Game.init(options);

            // English Ships
            Armada.Game.attachImage("select-object-A", "A");
            Armada.Game.attachImage("select-object-B", "B");
            Armada.Game.attachImage("select-object-C", "C");
            Armada.Game.attachImage("select-object-D", "D");
            Armada.Game.attachImage("select-object-E", "E");
            // Spanish ships
            Armada.Game.attachImage("select-object-S", "S");
            Armada.Game.attachImage("select-object-U", "U");
            Armada.Game.attachImage("select-object-V", "V");
            Armada.Game.attachImage("select-object-W", "W");

            // Register eventbs
            $("#canvas-reset").click(function () {
                Armada.Game.resetCanvas();
                return false;
            });
            $("#canvas-output-jpg").click(function () {
                Armada.Game.outputPng();
                return false;
            });

            // Fade out the loading screen and fadeIn the game screen
            // once everything has been setup
            $('#canvas-loading').fadeOut(function() {
                $('#canvas-container').fadeIn();
            });
        });
    });
</script>

    </body>
</html>
